{"version":3,"sources":["../../src/pages/lm/lmtagarchivemanage/lmtagarchivemanage.ts","../../src/pages/lm/lmtagarchivemanage/lmtagarchivemanage.module.ts"],"names":[],"mappings":"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","file":"78.js","sourcesContent":["declare var $: any\nimport { Component } from '@angular/core';\nimport { AndroidPermissions } from '@ionic-native/android-permissions';\nimport { File } from '@ionic-native/file';\nimport { FileOpener } from '@ionic-native/file-opener';\nimport { FileTransfer, FileTransferObject } from '@ionic-native/file-transfer';\nimport { IonicPage, LoadingController, MenuController, NavController, NavParams, Platform, ToastController } from 'ionic-angular';\nimport { ConfigProvider } from '../../../providers/config';\nimport { HttpServicesProvider } from '../../../providers/http-services';\nimport { PhoneDeviceProvider } from '../../../providers/phone-device';\nimport { StorageProvider } from '../../../providers/storage';\ndeclare var fuzzySearch:any \n\n/**\n * Generated class for the LlmtagarchivemanagePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-lmtagarchivemanage',\n  templateUrl: 'lmtagarchivemanage.html',\n})\nexport class LmtagarchivemanagePage {\n  public list = [] // 列表\n  public lmtagStatusList = [{ name: '全部', value: 'all', count: 0 }]\n  public projectid = ''\n  public filepath = '';\n  public currentTab = 0\n  public search = ''\n  public status = 'all'\n  public timer = null\n  public archiveid = null\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public httpService: HttpServicesProvider,\n    public phoneDevice: PhoneDeviceProvider,\n    public platform: Platform,\n    public toastCtrl: ToastController,\n    public permission: AndroidPermissions,\n    public file: File,\n    public transfer: FileTransfer,\n    public fileopen: FileOpener,\n    public loadingCtrl: LoadingController,\n    public configProvider: ConfigProvider,\n    public menuCtrl: MenuController,\n    public storage: StorageProvider) {\n    this.phoneDevice.phoneBacktoPop(this.navCtrl);\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad LmtagarchivemanagePage');\n  }\n  ionViewWillEnter() { //当将要进入页面时触发\n    this.list = [];\n    // this.lmtagStatusList = [];\n    // this.initproject();\n    this.projectid = this.storage.get(StorageProvider.LM_PROJECTID);\n    this.getDict();\n    if (this.projectid) {\n      this.initlist();\n      this.initTree();\n    }\n  }\n\n  doRefresh(refresher) {\n    // this.initproject()\n    this.getDict();\n    this.initlist();\n    setTimeout(() => {\n      refresher.complete(); //停止下拉刷新\n    }, 1500)\n  }\n\n  changeTab(status, i) {\n    this.currentTab = i\n    this.status = status\n    this.initlist()\n  }\n\n  // 搜索+防抖\n  handleSearch() {\n    // console.log(this.search);\n    clearTimeout(this.timer)\n    this.timer = setTimeout(() => {\n      this.initlist()\n      this.timer = null\n    }, 300)\n\n  }\n\n  // 获取最新一组项目的projectid\n  // initproject() {\n  //   this.httpService.get('/query/lmpj/lmpjProject/headlist?format=list', null, (result) => {\n  //     this.projectid = result[0]['projectid'];\n  //     this.getDict();\n  //     this.initlist();\n  //   });\n  // }\n\n  initlist() {\n    let url = `/lmtagArchiveManage/list?sort=manageid&order=desc&projectid=${this.projectid}&_search=false&rows=50&page=1&sidx=&sord=asc&fuzzysearch=${this.search}`\n    if (this.status != 'all') {\n      const where = { 'toint_amstatus_equal': this.status }\n      url = url + `&where=${encodeURI(JSON.stringify(where))}`\n    }\n    if (this.archiveid) {\n      url += `&archiveid=${this.archiveid}`\n    }\n    this.httpService.get(url, null, (result) => {\n      if (result != null) {\n        this.list = result.rows\n      }\n    });\n  }\n\n  getDict() {\n    this.httpService.getDict('LMTAG_ARCHIVE_STATUS', data => {//\n      if (data !== \"\") {\n        this.lmtagStatusList = [...this.lmtagStatusList, ...data]\n        this.getCount()\n      }\n    })\n  }\n\n  getCount() {\n    const url = `/query/lmtag/lmtagArchiveManage/findManageCount?projectid=${this.projectid}`\n    this.httpService.get(url, null, (result) => {\n      if (result != null) {\n        const data = result.data[0]\n        this.lmtagStatusList.map(item => {\n          if (item.value == 'all') { // 全部\n            item.count = data['allcount']\n          }\n          if (item.value == '4') { // 未归档\n            item.count = data['count4']\n          }\n          if (item.value == '0') { // 未同步\n            item.count = data['count0'] || 0\n          }\n          if (item.value == '3') { // 已归档\n            item.count = data['count3']\n          }\n          if (item.value == '1') { // 已同步\n            item.count = data['count1'] || 0\n          }\n          if (item.value == '5') { // 归档失败\n            item.count = data['count5']\n          }\n        })\n        console.log(this.lmtagStatusList);\n      }\n    });\n  }\n\n  // 一键更新\n  autoArchive() {\n    const url = `/lmtagArchiveManage/autoArchive?projectid=${this.projectid}`\n    let loading = this.loadingCtrl.create({\n      content: '正在加载中...', // 数据加载中显示\n      enableBackdropDismiss: true,\n    });\n    loading.present();\n    this.httpService.get(url, null, (result) => {\n      loading.dismiss();\n      if (result != null && result.success) {\n        this.toastCtrl.create({\n          position: 'middle',\n          message: result.message,\n          duration: 2000\n        }).present();\n      }\n    });\n  }\n\n  // 归档上传\n  archiveUpload() {\n    console.log('归档上传');\n  }\n\n  removeFile(item) {\n    const url = '/lmtagArchiveManage/remove'\n    this.httpService.post(url, { ids: item.manageid }, (result) => {\n      if (result != null && result.success) {\n        this.toastCtrl.create({\n          position: 'middle',\n          message: result.message,\n          duration: 2000\n        }).present();\n      }\n    });\n  }\n\n  // 下载相关函数\n  checkPermissions() {\n    this.permission.requestPermission(this.permission.PERMISSION.READ_EXTERNAL_STORAGE).then(res => { console.log(res) });\n    this.permission.requestPermission(this.permission.PERMISSION.WRITE_EXTERNAL_STORAGE).then(res => { console.log(res) });\n  }\n  openFile(item) {\n    item['url'] = `${ConfigProvider.apiUrl}/attach/download/site/${item.attachid}`\n    // item['url'] =Utils.dealUrl('/attach/download/paperinfo/073b393ffd2c4bf096df6d57c5ca1448')\n    // \"/bkc/attach/download/paperinfo/073b393ffd2c4bf096df6d57c5ca1448\"\n    if (item.amtype == 'gif' || item.amtype == 'jpg' || item.amtype == 'jpeg' || item.amtype == 'png' || item.amtype == 'bmp') {\n      this.phoneDevice.showBigimage(item['url']);\n    } else {\n      let loading = this.loadingCtrl.create({\n        content: '下载中，请稍等...',//数据加载中显示\n        enableBackdropDismiss: true,\n      });\n      loading.present();\n      let now = 0;\n      var url = item['url'];\n      let name = item['papername'];\n      if (this.platform.is('ios')) {\n        this.filepath = this.file.dataDirectory + item['url'];\n      } else {\n        if (item['papername'].substr(0, 1) == '#') {\n          name = name.replace('#', ' ')\n        }\n        // this.file.externalApplicationStorageDirectory\n        if (name.lastIndexOf('.') != -1) {\n          this.filepath = this.file.externalApplicationStorageDirectory + name;\n        } else {\n          this.filepath = this.file.externalApplicationStorageDirectory + name + '.' + item['amtype'];\n        }\n      }\n      let filetransfer: FileTransferObject = this.transfer.create();\n      filetransfer.onProgress((progressEvent) => {\n        if (progressEvent.lengthComputable) {\n          now = progressEvent.loaded / progressEvent.total * 100;\n        }\n      })\n      filetransfer.download(url, this.filepath, true).then((res) => {\n        this.checkPermissions();\n        loading.dismiss();\n        this.fileopen.open(this.filepath, this.httpService.getFileMimeType(item['amtype'])).then((data) => {\n\n        }, (err) => {\n          // loading.dismiss();\n          this.toastCtrl.create({\n            position: 'middle',\n            message: '文件打开失败/无' + this.httpService.getFileMimeType(item['amtype']) + '查看器',\n            duration: 2000\n          }).present();\n        })\n      }, (err) => {\n        loading.dismiss();\n        this.toastCtrl.create({\n          position: 'middle',\n          message: '文件下载失败',\n          duration: 2000\n        }).present();\n      })\n    }\n  }\n  // 下载相关函数 end\n\n  // 树\n  //树初始化\n  initTree() {\n    var that = this;\n    $('#myzTree').empty(); // 清空树区域\n    var setting = {\n      data: {\n        simpleData: {\n          enable: true,\n          idKey: \"id\",\n          pIdKey: \"pId\"\n        }\n      },\n      view: {\n        dblClickExpand: false\n      },\n      callback: {\n        onClick: function (event, treeId, treeNode) {\n          that.archiveid = null\n          if (treeNode.parentTId) {\n            that.archiveid = treeNode.id\n            that.initlist()\n          } else {\n            that.initlist()\n          }\n          that.menuCtrl.close();\n        }\n      }\n    };\n    this.httpService.post(`/query/lmtag/lmtagArchive/findTree?projectid=${this.projectid}`, null, (result) => {\n      $.fn.zTree.init($(\"#myzTree\"), setting, result.data);\n      fuzzySearch('myzTree', '#search', null, true);\n    })\n  }\n  datafilter(treeId, parentNode, childNodes) {\n    return childNodes.data;\n  }\n  openMenu() {\n    this.menuCtrl.enable(true, 'combo');\n    // this.menuCtrl.enable(false,'comboTree');\n    this.menuCtrl.open();\n    let appEl = <HTMLElement>(document.getElementsByTagName('ION-APP')[0]);\n    let appElHeight = appEl.clientHeight - 66;\n    $('#myzTree').css({ 'height': appElHeight + 'px' })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lm/lmtagarchivemanage/lmtagarchivemanage.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LmtagarchivemanagePage } from './lmtagarchivemanage';\n\n@NgModule({\n  declarations: [\n    LmtagarchivemanagePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LmtagarchivemanagePage),\n  ],\n})\nexport class LmtagarchivemanagePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lm/lmtagarchivemanage/lmtagarchivemanage.module.ts"],"sourceRoot":""}