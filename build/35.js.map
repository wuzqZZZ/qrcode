{"version":3,"sources":["../../src/pages/me/annex/annex.ts","../../src/pages/me/annex/annex.module.ts"],"names":[],"mappings":"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","file":"35.js","sourcesContent":["import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { StorageProvider } from '../../../providers/storage';\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer';\nimport { Utils } from \"../../../providers/Utils\";\nimport { HttpServicesProvider } from '../../../providers/http-services';\nimport { PhotoViewer } from '@ionic-native/photo-viewer';\n@IonicPage()\n@Component({\n  selector: 'page-annex',\n  templateUrl: 'annex.html',\n})\nexport class AnnexPage {\n  public ImdefectList = [];\n  public isoffwifi: boolean;\n  public imageurllist = [];\n  public progressBar: number = 0;\n  public onProcess: number = 0;\n  public defectnum: string;\n  public description: string;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public storage: StorageProvider,\n    public transfer: FileTransfer,\n    public httpServices: HttpServicesProvider,\n    public photoView: PhotoViewer) {\n  }\n  ionViewDidLeave() {\n    let completeItem = [];\n    if(this.ImdefectList !=null){\n      for (let i = 0; i < this.ImdefectList.length; i++) {\n        if (this.ImdefectList[i]['num'] == this.ImdefectList[i]['imageurllist'].length) {\n          completeItem.push(i);\n        }\n      }\n      for (let i = 0; i < completeItem.length; i++) {\n        this.ImdefectList.splice(completeItem[i], 1);\n      }\n      this.storage.set(StorageProvider.Me_IMDEFECTIMG, this.ImdefectList);\n    }\n    \n    \n  }\n  ionViewWillEnter() {\n    this.ImdefectList = this.storage.get(StorageProvider.Me_IMDEFECTIMG);\n    if(this.ImdefectList != null){\n      console.log(this.ImdefectList);\n      this.imageurllist = this.ImdefectList[0]['imageurllist'];\n      this.isoffwifi = this.storage.get(StorageProvider.ISOFFWIFILOAD);\n      console.log(this.isoffwifi);\n    }\n    \n  }\n  uploadify(busstype: string, bussid: String, imageData: any, callback?: any) {\n    const fileTransfer: FileTransferObject = this.transfer.create();\n    var api = '/uploadify/upload?busstype=' + busstype + \"&bussid=\" + bussid;\n    api = Utils.dealUrl(api);\n    let filename = Utils.dateFormat(new Date(), 'yyyy-MM-dd hh:mm:ss');\n    let options: FileUploadOptions = {\n      fileKey: 'file',\n      fileName: filename + '.jpg',\n      mimeType: 'image/jpeg',\n      httpMethod: \"POST\", \n    }\n    fileTransfer.onProgress((progressEvent) => {\n      if (progressEvent.lengthComputable) {\n        imageData['progressBar'] = progressEvent.loaded / progressEvent.total * 10;\n      }\n    })\n    fileTransfer.upload(imageData['url'], encodeURI(api), options).then((result) => {\n      callback(result);\n    });\n  }\n  upload(item) {\n    for (let i = 0; i < item['imageurllist'].length; i++) {\n      if (item['imageurllist']) {\n        if (this.onProcess < item['imageurllist'].length) {\n          this.uploadify('imDefect', item['imdefectid'], item['imageurllist'][i], (res) => {\n            console.log(this.ImdefectList);\n            this.storage.set(StorageProvider.Me_IMDEFECTIMG, this.ImdefectList);\n          })\n        }\n      }\n    }\n  }\n  showBigimg(url) {\n    this.photoView.show(url);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/me/annex/annex.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AnnexPage } from './annex';\nimport { ComponentsModule } from '../../../components/components.module';\n@NgModule({\n  declarations: [\n    AnnexPage,\n  ],\n  imports: [\n    ComponentsModule,\n    IonicPageModule.forChild(AnnexPage),\n  ],\n})\nexport class AnnexPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/me/annex/annex.module.ts"],"sourceRoot":""}