{"version":3,"sources":["../../src/pages/system/reportview/reportview.ts","../../src/pages/system/reportview/reportview.module.ts"],"names":[],"mappings":"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","file":"24.js","sourcesContent":["import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams,Platform } from 'ionic-angular';\nimport { PhoneDeviceProvider } from '../../../providers/phone-device';\nimport { ConfigProvider } from '../../../providers/config';\nimport { DomSanitizer, SafeUrl } from '@angular/platform-browser';\nimport * as $ from 'jquery';\n/**\n * Generated class for the ReportviewPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-reportview',\n  templateUrl: 'reportview.html',\n})\nexport class ReportviewPage {\n  public tag = false;\n  public name = '';\n  public id = '';\n  public title = '';\n  public code = '';\n  public trustsrc: SafeUrl;\n  public src = '/report/view/html/';\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    public phoneDevice: PhoneDeviceProvider,\n    public trusturl: DomSanitizer,\n    public platform: Platform,) {\n    this.name = this.navParams.get('name');//id\n    this.id = this.navParams.get('id');//id\n    this.code = this.navParams.get('code');\n    if(this.name == undefined){\n      this.title = '暂无预览';\n    }else{\n      this.title = this.name + '检(维)修工作票';\n      this.src = ConfigProvider.apiUrl + this.src + this.code + '?' + 'id=' + this.id;\n    // this.src=this.src+this.data[Object.keys(this.data)[0]];\n    this.trustsrc = this.trusturl.bypassSecurityTrustResourceUrl(this.src);\n      // this.trustsrc ='/report/view/html/ttWorkticketElecParent?id=335b128172a8400f84b2e81f1dd029cd'\n    }\n    \n    this.phoneDevice.phoneBacktoPop(this.navCtrl);\n  }\n\n  // 因为iframe 加载是在页面dom节点完全生成完成之后所以要加上延迟函数\n  ionViewDidLoad() {\n    setTimeout(() => {\n      console.log('platform is ios ? ', this.platform.is('ios'))\n\n      // 按照设备高度填充剩余空间\n      const len = $('.main').length - 1\n      const height = $('.main')[len].offsetHeight - $('.main')[len].children[0].offsetHeight - 20\n      $('#iframeHeight').css('height', height)\n      $('#iframe').css('visibility', 'visible');\n\n      if ($('#iframe')[0].contentWindow.document.body.children.length == 0) {\n        return;\n      }\n\n      if (this.platform.is('ios')) {\n        $('#iframe')[0].contentWindow.document.body.children[0].style['marginLeft'] = '-20px';\n      } else {\n        $('#iframe')[0].contentWindow.document.body.style['margin'] = '0px';\n      }\n\n      // 按照内容实际宽度缩放\n      const iframeWidth = $('#iframe')[0].contentWindow.innerWidth\n      const fileWidth = $('#iframe')[0].contentWindow.document.body.children[0].clientWidth\n      const widthScale = (iframeWidth / fileWidth).toFixed(3)\n\n      // 按照内容实际高度裁剪，避免缩放导致的大片空白\n      const fileHeight = $('#iframe')[0].contentWindow.document.body.children[0].clientHeight * +widthScale;\n      $('#iframe')[0].contentWindow.document.body.style['height'] = `${fileHeight}`\n      $('#iframe')[0].contentWindow.document.body.children[0].style['transform'] = `scale(${widthScale})`;\n      $('#iframe')[0].contentWindow.document.body.children[0].style['transform-origin'] = '0 top 0';\n\n      let touchtime = 0;\n      // 模拟ios双击\n      $('#iframe')[0].contentWindow.document.body.children[0].onclick = () => {\n        console.log(this.tag);\n        if (new Date().getTime() - touchtime < 500) {\n          // console.log('双击了');\n          $('#iframe')[0].contentWindow.document.body.children[0].style['transform'] = 'scale(1,1)';\n          this.tag = !this.tag;\n        } else {\n          if ($('#iframe')[0].contentWindow.innerWidth < 375) {\n            $('#iframe')[0].contentWindow.document.body.children[0].style['transform'] = `scale(${widthScale},.51)`;\n          } else {\n            $('#iframe')[0].contentWindow.document.body.children[0].style['transform'] = `scale(${widthScale},.58)`;\n          }\n          touchtime = new Date().getTime();\n          this.tag = !this.tag;\n        }\n      }\n\n    }, 1000)\n  }\n  showbigcontent() {\n    $('#iframe')[0].contentWindow.document.body.children[0].style['zoom'] = 2;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/system/reportview/reportview.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ReportviewPage } from './reportview';\n\n@NgModule({\n  declarations: [\n    ReportviewPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ReportviewPage),\n  ],\n})\nexport class ReportviewPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/system/reportview/reportview.module.ts"],"sourceRoot":""}