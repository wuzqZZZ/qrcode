{"version":3,"sources":["../../src/pages/lm/lmtagtraininghandover/lmtagtraininghandover.module.ts","../../src/pages/lm/lmtagtraininghandover/lmtagtraininghandover.ts"],"names":[],"mappings":"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","file":"43.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LmtagtraininghandoverPage } from './lmtagtraininghandover';\n\n@NgModule({\n  declarations: [\n    LmtagtraininghandoverPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LmtagtraininghandoverPage),\n  ],\n})\nexport class LmtagtraininghandoverPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lm/lmtagtraininghandover/lmtagtraininghandover.module.ts","declare var $: any\nimport { Component } from '@angular/core';\nimport { AndroidPermissions } from '@ionic-native/android-permissions';\nimport { Camera, CameraOptions } from '@ionic-native/camera';\nimport { File } from '@ionic-native/file';\nimport { FileOpener } from '@ionic-native/file-opener';\nimport { FileTransfer } from '@ionic-native/file-transfer';\nimport { ActionSheetController, Events, IonicPage, LoadingController, MenuController, NavController, NavParams, Platform, ToastController } from 'ionic-angular';\nimport { ConfigProvider } from '../../../providers/config';\nimport { HttpServicesProvider } from '../../../providers/http-services';\nimport { PhoneDeviceProvider } from '../../../providers/phone-device';\nimport { StorageProvider } from '../../../providers/storage';\nimport { Utils } from '../../../providers/Utils';\ndeclare var fuzzySearch:any \n/**\n * Generated class for the LmtagstartuptrainingPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-lmtagtraininghandover',\n  templateUrl: 'lmtagtraininghandover.html',\n})\nexport class LmtagtraininghandoverPage {\n\n  public list = [] // 列表\n  // public lmtagStatusList = []\n  public projectid = ''\n  // public filepath = '';\n  // public currentTab = 0\n  public search = ''\n  // public status = 1\n  public timer = null\n  // public archiveid = null\n  public training = {}\n  public editItemFlag = false;\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public httpService: HttpServicesProvider,\n    public phoneDevice: PhoneDeviceProvider,\n    public platform: Platform,\n    public toastCtrl: ToastController,\n    public permission: AndroidPermissions,\n    public file: File,\n    public camera: Camera,\n    public transfer: FileTransfer,\n    public fileopen: FileOpener,\n    public loadingCtrl: LoadingController,\n    public configProvider: ConfigProvider,\n    public menuCtrl: MenuController,\n    public events: Events,\n    public actionsheetCtrl: ActionSheetController,\n    public storage: StorageProvider) {\n    this.phoneDevice.phoneBacktoPop(this.navCtrl);\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad LmtagarchivemanagePage');\n\n    this.projectid = this.storage.get(StorageProvider.LM_PROJECTID);\n    // this.getDict();\n    if (this.projectid) {\n      this.initlist();\n    }\n  }\n  ionViewWillEnter() { //当将要进入页面时触发\n    // this.projectid = this.storage.get(StorageProvider.LM_PROJECTID);\n    // if (this.projectid) {\n    //   this.initlist();\n    // }\n  }\n\n  doRefresh(refresher) {\n    // this.initproject()\n    // this.getDict();\n    this.training = {}\n    this.editItemFlag = false\n    this.initlist();\n    setTimeout(() => {\n      refresher.complete(); //停止下拉刷新\n    }, 1500)\n  }\n\n  // changeTab(status, i) {\n  //   this.currentTab = i\n  //   this.status = status\n  //   this.initlist()\n  // }\n\n  // 搜索+防抖\n  handleSearch() {\n    // console.log(this.search);\n    clearTimeout(this.timer)\n    this.timer = setTimeout(() => {\n      this.initlist()\n      this.timer = null\n    }, 300)\n  }\n\n  handleInfo(item, edit = false) {\n    if (edit) {\n      this.events.subscribe('saveListCall', (params) => {\n        // console.log(params);\n        const outData = JSON.parse(params)\n        // 接收B页面发布的数据\n        console.log(outData);\n        this.training = outData\n        this.saveTraining()\n        // 取消订阅\n        this.events.unsubscribe('saveListCall');\n      })\n    }\n    this.navCtrl.push('LmtagtraininghandoverinfoPage', { item, edit })\n  }\n\n  initlist() {\n    this.list = []\n    let url = `/lmtagTrainingHandover/list?sort=createtime&order=desc&projectid=${this.projectid}&_search=false&rows=50&page=1&sidx=&sord=asc&fuzzysearch=${this.search}`\n    this.httpService.get(url, null, (result) => {\n      if (result != null) {\n        this.list = result.rows\n      }\n    });\n  }\n\n  cancelEidt() {\n    this.editItemFlag = false\n    this.training['version'] && this.initlist()\n    this.training = {}\n  }\n\n  // 编辑\n  editTraining(item, index) {\n    // 已经有 编辑/新增项 在操作\n    if (this.editItemFlag) {\n      return this.toastCtrl.create({\n        position: 'top',\n        message: '有操作暂未保存',\n        duration: 1200\n      }).present();\n    }\n    this.training = {\n      ...item,\n      uploadtime: Utils.dateFormat(new Date(), 'yyyy-MM-dd hh:mm:ss')\n    }\n    this.list.splice(index, 1)\n    this.editItemFlag = true\n  }\n\n  // 新建\n  createTraining() {\n    const userinfo = this.storage.get(StorageProvider.ME_USERINFO);\n    this.training = {\n      editor: userinfo.id,\n      editorname: userinfo.name,\n      description: '',\n      uploadtime: Utils.dateFormat(new Date(), 'yyyy-MM-dd hh:mm:ss'),\n      phone: userinfo.phone || '',\n      projectid: this.projectid,\n      uploader: userinfo.id,\n      uploadername: userinfo.name,\n      thid: Utils.getUuid()\n    }\n    // this.editItemFlag = true\n    this.photo('lmtagTrainingHandover', false) // 拉起\n  }\n\n  saveTraining(showTip = false) {\n    console.log(this.training);\n    const data = [this.training, ...this.list]\n    this.httpService.post('/lmtag/lmtagTrainingHandoverService/saveList', data, res => {\n      if (res.code == 0) {\n        if (showTip) {\n          this.toastCtrl.create({\n            position: 'top',\n            duration: 1200,\n            message: '保存成功',\n          }).present();\n        }\n        this.editItemFlag = false\n        // this.training = {}\n        this.initlist()\n      }\n    })\n  }\n\n  removeTraining(ids) {\n    this.httpService.removeTableIds('lmtagTrainingHandover', { ids }, res => {\n      console.log(res);\n      if (res.code == 0) {\n        this.toastCtrl.create({\n          message:'删除成功',\n          duration:1200,\n          position:'top'\n        }).present()\n        this.initlist();\n      }\n    }, this.httpService.CONTENTTYPE_FORMURLENCODE)\n  }\n\n  /**\n   * 选择人员\n   */\n  chooseperson(id, name) {\n    this.navCtrl.push('UserdialogPage', {\n      typeid: id,\n      type: 'single',//单选\n      typename: name\n    });\n    this.events.subscribe('user:userinfo', (data, time) => {\n      console.log(data);\n\n      this.training[data.typename] = data.name;\n      this.training[data.typeid] = data.id;\n      this.training['phone'] = data.phone\n      this.events.unsubscribe('user:userinfo');\n    })\n  }\n\n  beforeUpload(e) {\n    const file = e.target.files[0]\n    console.log(e.target.files);\n    if (file.length == 0) {\n      return\n    }\n    let formdata = new FormData()\n    formdata.append('file', file)\n    formdata.append('busstype', 'lmtagTrainingHandover')\n    formdata.append('bussid', this.training['thid'])\n    let loading = this.loadingCtrl.create({\n      content: '上传中，请稍等...',//数据加载中显示\n      enableBackdropDismiss: true,\n    });\n    loading.present();\n    $('#file')[0].value = ''\n    this.httpService.postFormData('/uploadify/upload', formdata, res => {\n      loading.dismiss();\n      if (res.error == 0) {\n        this.handleInfo(this.training, true) // 携带初始化数据进入详情\n        return\n      }\n    })\n  }\n  photo(busstype,video) {\n    const actionsheet = this.actionsheetCtrl.create({\n      // cssClass:'headChoice',\n      buttons: [\n        {\n          text: '拍照',\n          role: 'destructive',\n          cssClass: 'normal',\n          handler: () => {\n            this.doCamera(this.camera.PictureSourceType.CAMERA,busstype,video);\n          }\n        }, {\n          text: '从手机相册中选择',\n          cssClass: 'normal',\n          handler: () => {\n            this.doCamera(this.camera.PictureSourceType.PHOTOLIBRARY,busstype,video);\n          }\n        }, {\n          text: '从文件中选择',\n          cssClass: 'normal',\n          handler: () => {\n            $('#file').click();\n          }\n        },\n          {\n          text: '取消',\n          role: 'cancel',\n          cssClass: 'cancel',\n          handler: () => {\n          }\n        }\n      ]\n    })\n    actionsheet.present();\n  }\n  doCamera(sourceType,busstype,video) {\n  \n    let mediatype =0;\n    if(video){\n      mediatype =1;\n    }\n    const options: CameraOptions = {\n      quality: 100, //图片质量\n      destinationType: this.camera.DestinationType.FILE_URI,  /*返回的类型*/\n      encodingType: this.camera.EncodingType.JPEG,\n      sourceType: sourceType,\n      mediaType: mediatype,////可选媒体类型：圖片=0，只允许选择图片將返回指定\n      correctOrientation: true,//陀螺仪纠正照片方向\n      // mediaType: this.camera.MediaType.PICTURE,\n      //allowEdit:true,\n      targetWidth: 1024,  /*宽度高度要设置*/\n      targetHeight: 1024\n    }\n    // let that = this;\n    let obj={};\n\n    // 获取图片\n    this.camera.getPicture(options).then((imageData) => {\n      // 获取成功\n      let loading = this.loadingCtrl.create({\n        content: '上传中，请稍等...',//数据加载中显示\n        enableBackdropDismiss: true,\n      });\n      loading.present();\n      this.httpService.uploadify(busstype, this.training['thid'], imageData, (result) => {\n        loading.dismiss();\n        \n        this.handleInfo(this.training, true) // 携带初始化数据进入详情\n      });\n    })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lm/lmtagtraininghandover/lmtagtraininghandover.ts"],"sourceRoot":""}