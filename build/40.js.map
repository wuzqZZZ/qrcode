{"version":3,"sources":["../../src/pages/lm/lmtagworkorder/lmtagworkorderinfo/components/lmtagworkorderplanbaseinfo/lmtagworkorderplanbaseinfo.ts","../../src/pages/lm/lmtagworkorder/lmtagworkorderinfo/components/lmtagworkorderplanbaseinfo/lmtagworkorderplanbaseinfo.module.ts"],"names":[],"mappings":"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","file":"40.js","sourcesContent":["declare var $: any\nimport { Component } from '@angular/core';\nimport { Events, IonicPage, NavController, NavParams, Platform, ToastController } from 'ionic-angular';\nimport { HttpServicesProvider } from '../../../../../../providers/http-services';\nimport { PhoneDeviceProvider } from '../../../../../../providers/phone-device';\nimport { StorageProvider } from '../../../../../../providers/storage';\nimport { ToolsProvider } from '../../../../../../providers/tools';\nimport { WorkflowServiceProvider } from '../../../../../../providers/workflow-service';\n/**\n * Generated class for the LmtagworkorderplanbaseinfoPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-lmtagworkorderplanbaseinfo',\n  templateUrl: 'lmtagworkorderplanbaseinfo.html',\n})\nexport class LmtagworkorderplanbaseinfoPage {\n  public formdata = [\n    { 'name': '检修设备', 'index': 'assetname', 'indexId': 'assetid', 'type': 'chooseasset', 'placeholder': '请选择检修设备' },\n    { 'name': '检修时机', 'index': 'checktiming', 'type': 'select', 'dicttype': 'LMTAG_CHECK_TIMING', 'placeholder': '请输入检修时机' },\n    { 'name': '项目类型', 'index': 'projecttype', 'type': 'select', 'dicttype': 'LMTAG_PROJECT_PROJECTTYPE', 'placeholder': '请输入项目类型' },\n    { 'name': '项目状态', 'index': 'projectstatusname', 'type': 'text', 'placeholder': '请输入项目状态' },\n    { 'name': '项目名称', 'index': 'projectname', 'type': 'text', 'placeholder': '请输入项目名称' },\n    { 'name': '主要工作内容', 'index': 'projectdesc', 'type': 'textarea', 'placeholder': '请输入工作内容', 'disabled': true, 'autoheight': true },\n    { 'name': '项目来源', 'index': 'projectsource', 'type': 'select', 'dicttype': 'LMTAG_PROJECT_SOURCE', 'placeholder': '请输入项目来源' },\n    { 'name': '检修类型', 'index': 'checktype', 'type': 'select', 'dicttype': 'LMTAG_CHECK_TYPE', 'placeholder': '请输入检修类型' },\n    { 'name': '资金来源', 'index': 'fundsource', 'type': 'select', 'dicttype': 'LMTAG_FUND_SOURCE', 'placeholder': '请输入资金来源' },\n    { 'name': '资金序号', 'index': 'fundnum', 'type': 'text', 'placeholder': '请输入资金序号' },\n    { 'name': '里程碑？', 'index': 'milestone', 'type': 'customswitch' },\n    { 'name': '另附清单？', 'index': 'islist', 'type': 'customswitch' },\n    { 'name': '涉及异动？', 'index': 'isvariations', 'type': 'customswitch' },\n    { 'name': '进口物资？', 'index': 'isimport', 'type': 'customswitch' },\n    { 'name': '需要BD费用口长周期备件？', 'index': 'isbd', 'type': 'customswitch' },\n    { 'name': '附件', 'index': 'prjid', 'type': 'uploadify', 'placeholder': '', 'busstype': 'lmtagProject' },\n    // { 'name': '计划工期(天)', 'index': 'plantime', 'type': 'text', 'placeholder': '请输入计划工期天数' },\n    // { 'name': '计划工时(人日)', 'index': 'planworkhour', 'type': 'text', 'placeholder': '请输入计划工时' },\n    // { 'name': '检修专业', 'index': 'majorid', 'type': 'select', 'dicttype': 'BKC_SPECAIL', 'placeholder': '请选择检修专业' },\n    // { 'name': '验收等级', 'index': 'checklevid', 'type': 'select', 'dicttype': 'LMPJ_ACCEPTANCE_LEVEL', 'placeholder': '请选择验收等级' },\n    // { 'name': '外委？', 'index': 'outsource', 'type': 'switch', 'placeholder': '请选择是否外委' },\n    // { 'name': '外委单位', 'index': 'outsourceunitname', 'indexId': 'outsourceunit', 'type': 'selectDept', \"placeholder\": '请选择外委单位' },\n    // { 'name': '协助负责人', 'index': 'helpdirectorname', 'indexId': 'helpdirectorid', 'type': 'selectUser', \"placeholder\": '请选择协助负责人' },\n    // { 'name': '协助部门', 'index': 'helpdutydepartmentidname', 'indexId': 'helpdutydepartmentid', 'type': 'selectDept', \"placeholder\": '请选择协助部门' },\n    // { 'name': '填票时间', 'index': 'filltime', 'type': 'datetime', 'format': 'YYYY-MM-DD', \"placeholder\": '请选择填票时间' },\n    // { 'name': '出票时间', 'index': 'tickettime', 'type': 'datetime', 'format': 'YYYY-MM-DD', \"placeholder\": '请选择出票时间' },\n    // { 'name': '结票时间', 'index': 'checkouttime', 'type': 'datetime', 'format': 'YYYY-MM-DD', \"placeholder\": '请选择结票时间' },\n    // { 'name': '已就绪？', 'index': 'isready', 'type': 'switch', 'placeholder': '请选择' },\n  ]\n\n  public forminfo = {};\n  public id = '';\n  public type = '';\n  public pageControl = {};\n\n  constructor(public events: Events, public storage: StorageProvider, public navCtrl: NavController, public toastCtrl: ToastController, public navParams: NavParams, public httpService: HttpServicesProvider, public workflow: WorkflowServiceProvider,\n    public platform: Platform,\n    public tools: ToolsProvider,\n    public phoneDevice: PhoneDeviceProvider,) {\n    this.phoneDevice.phoneBacktoPop(this.navCtrl);\n\n    this.id = this.navParams.get('prjid');\n    this.type = this.navParams.get('type');\n\n    this.initinfo()\n\n  }\n\n  initinfo() {\n    var url = \"/lmtagProject/detail/\" + this.id;\n    this.httpService.get(url, null, (result) => {\n      if (result.code == 0) {\n        this.forminfo = result.data;\n        this.pageElement(result.data.wfstatus, result.data.wfid);\n\n        this.httpService.initAsset(result.data.assetid, this.forminfo, 'assetname')\n        this.httpService.initUserName(result.data.resperson, 'respersonname', this.forminfo)\n        this.httpService.initUserName(result.data.permitman, 'permitmanname', this.forminfo)\n        this.httpService.inittime('planstarttime', this.forminfo);\n        this.httpService.inittime('planendtime', this.forminfo);\n        this.httpService.inittime('endtime', this.forminfo);\n        this.httpService.inittime('edittime', this.forminfo);\n        this.httpService.inittime('permittime', this.forminfo);\n        this.httpService.inittime('techtime', this.forminfo);\n        this.initprojectstatusname(result.data.projectstatus);\n      }\n    });\n  }\n\n  pageElementControl(data) {\n    this.pageControl = data;\n  }\n  async pageElement(wfstatus, wfid) {// 初始化页面资源权限\n    // var that = this;\n    const data = await this.httpService.getPageControlElementAnsy(\"lmtagWorkorder_form\", wfstatus, wfid);\n    this.pageElementControl(data);\n    var array = this.httpService.pageDate(data);\n    this.formdata = this.httpService.getpagedata(this.formdata, array);\n  }\n\n  submit() {\n    this.httpService.initsavetime('planstarttime', this.forminfo);\n    this.httpService.initsavetime('planendtime', this.forminfo);\n    this.httpService.initsavetime('endtime', this.forminfo);\n    this.httpService.initsavetime('edittime', this.forminfo);\n    this.httpService.initsavetime('permittime', this.forminfo);\n    this.httpService.initsavetime('techtime', this.forminfo);\n\n    console.log(this.forminfo);\n\n    let obj = {\n      master: this.forminfo\n    }\n    this.httpService.post('/lmtag/lmtagProjectService/saveMasterSlave', obj, (res) => {\n      if (res.code == 0) {\n        this.initinfo();\n        this.toastCtrl.create({\n          position: 'bottom',\n          duration: 1500,\n          message: '保存成功',\n        }).present();\n      } else {\n        this.toastCtrl.create({\n          position: 'bottom',\n          duration: 1500,\n          message: '保存失败',\n        }).present();\n      }\n    })\n\n    this.navCtrl.pop();\n    this.events.publish('workorderplan:forminfo', this.forminfo);\n  }\n\n  initprojectstatusname(status) {\n    this.httpService.getDictName(\"LMTAG_PROJECT_STATUS\", status, res => {\n      if (res !== \"\") {\n        this.forminfo['projectstatusname'] = res\n      }\n    })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lm/lmtagworkorder/lmtagworkorderinfo/components/lmtagworkorderplanbaseinfo/lmtagworkorderplanbaseinfo.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LmtagworkorderplanbaseinfoPage } from './lmtagworkorderplanbaseinfo';\nimport { ComponentsModule } from '../../../../../../components/components.module'\n\n@NgModule({\n  declarations: [\n    LmtagworkorderplanbaseinfoPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LmtagworkorderplanbaseinfoPage), ComponentsModule\n  ],\n})\nexport class LmtagworkorderplanbaseinfoPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lm/lmtagworkorder/lmtagworkorderinfo/components/lmtagworkorderplanbaseinfo/lmtagworkorderplanbaseinfo.module.ts"],"sourceRoot":""}