{"version":3,"sources":["../../src/pages/lm/lmsite/lmsite.ts","../../src/pages/lm/lmsite/lmsite.module.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAC0C;AACe;AACe;AAEX;AACS;AACtE;;;;;GAKG;AAOH;IAiBE,oBAAmB,OAAsB,EAAS,OAAwB,EAAS,SAAoB,EAAS,WAAiC,EACxI,WAAgC;QADtB,YAAO,GAAP,OAAO,CAAe;QAAS,YAAO,GAAP,OAAO,CAAiB;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,gBAAW,GAAX,WAAW,CAAsB;QACxI,gBAAW,GAAX,WAAW,CAAqB;QAjBlC,gBAAW,GAAG,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;QACnJ,SAAI,GAAG,EAAE,CAAC,KAAI;QACd,aAAQ,GAAG,EAAE,CAAC,CAAC,cAAc;QAC7B,iBAAY,GAAG,CAAC,CAAC,SAAQ;QACzB,UAAK,GAAG,EAAE,CAAC,KAAI;QACf,gBAAW,GAAG,EAAE,CAAC,UAAS;QAC1B,eAAU,GAAG,EAAE,CAAC;QAChB,uBAAkB,GAAG,EAAE,CAAC,OAAM;QAC9B,UAAK,GAAG,EAAE,CAAC,UAAS;QACpB,eAAU,GAAG,CAAC,CAAC,WAAU;QACzB,YAAO,GAAG,EAAE,CAAC;QACb,WAAM,GAAG,EAAE,CAAC;QACZ,WAAM,GAAG,EAAE,CAAC;QACZ,kBAAa,GAAG,EAAE,CAAC;QACnB,cAAS,GAAG,EAAE,CAAC;QACf,UAAK,GAAG,IAAI,CAAC;QAGlB,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC9C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,2EAAe,CAAC,YAAY,CAAC,CAAC;IAElE,CAAC;IACD,qCAAgB,GAAhB;QACE,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACnB,CAAC;IACD,qBAAqB;IACrB,+BAA+B;IAC/B,6CAA6C;IAC7C,kDAAkD;IAClD,4BAA4B;IAC5B,0DAA0D;IAC1D,MAAM;IACN,2BAA2B;IAC3B,0BAA0B;IAC1B,IAAI;IACJ,QAAQ;IACR,iCAAY,GAAZ;QAAA,iBAcC;QAbC,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,4BAA4B;QAC5B,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC;QACxB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC,CAAC;YAC3B,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACjB,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC;YACtB,IAAI,WAAW,GAAG,kBAAkB,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;YACvD,IAAI,GAAG,GAAG,mCAAmC,GAAG,KAAI,CAAC,SAAS,GAAG,kEAAkE,GAAG,WAAW,CAAC;YAClJ,KAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;YACzB,KAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QACpB,CAAC,EAAE,GAAG,CAAC;IACT,CAAC;IACD,kBAAkB;IAClB,gCAAgC;IAChC,8DAA8D;IAC9D,2HAA2H;IAC3H,kDAAkD;IAClD,+BAA+B;IAC/B,MAAM;IACN,IAAI;IACJ,gCAAW,GAAX;QACE,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,2BAA2B;QAC3B,wBAAwB;QACxB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC;IAClC,CAAC;IACD,8BAAS,GAAT,UAAU,EAAE;QACV,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,gBAAgB,EAAE;YAClC,IAAI,EAAE,MAAM;YACZ,aAAa,EAAE,EAAE;SAClB,CAAC;IACJ,CAAC;IACD,6BAAQ,GAAR;QACE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,gBAAgB,EAAE;YAClC,IAAI,EAAE,KAAK;SACZ,CAAC;IACJ,CAAC;IACD,mCAAc,GAAd,UAAe,GAAG;QAChB,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,EAAE,CAAC;QACrB,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,EAAE,UAAC,MAAM;YACrC,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC7C,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;gBACvB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACnB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,CAAC,CAAC,uBAAuB,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,EAAE,YAAY,EAAE,QAAQ,EAAE,CAAC,CAAC;YAC/E,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,6BAAQ,GAAR,UAAS,IAAI;QAAb,iBA2CC;QA1CC,IAAI,GAAG,GAAG,EAAE,CAAC;QAEb,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,CAAC,CAAC,CAAC;YACzB,GAAG,GAAG,mCAAmC,GAAG,IAAI,CAAC,SAAS,GAAG,wCAAwC,GAAG,IAAI,GAAG,6CAA6C;QAC9J,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,CAAC,CAAC,CAAC;YACzB,GAAG,GAAG,mCAAmC,GAAG,IAAI,CAAC,SAAS,GAAG,wCAAwC,GAAG,IAAI,GAAG,+EAA+E;QAEhM,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,CAAC,CAAC,CAAC;YACzB,GAAG,GAAG,mCAAmC,GAAG,IAAI,CAAC,SAAS,GAAG,wCAAwC,GAAG,IAAI,GAAG,6EAA6E;QAE9L,CAAC;QACD,8BAA8B;QAC9B,4JAA4J;QAC5J,IAAI;QACJ,8BAA8B;QAC9B,4JAA4J;QAC5J,IAAI;QACJ,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC;QACtB,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,EAAE,UAAC,MAAM;YACrC,EAAE,CAAC,CAAC,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;gBACxB,KAAI,CAAC,KAAK,GAAG,MAAM,CAAC;gBACpB,MAAM,CAAC,KAAK,CAAC;YACf,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC7C,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;gBACvB,kCAAkC;gBAClC,wEAAwE;gBACxE,kGAAkG;gBAClG,MAAM;gBACN,8DAA8D;gBAC9D,8FAA8F;gBAC9F,MAAM;gBACN,IAAI;gBACJ,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACpC,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;gBAClB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YAC3B,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,iCAAY,GAAZ,UAAa,KAAK,EAAE,KAAK;QACvB,CAAC,CAAC,wBAAwB,GAAG,KAAK,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QAC9F,CAAC,CAAC,kBAAkB,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QAC5C,gBAAgB;QAEhB,4CAA4C;QAC5C,iCAAiC;QACjC,kBAAkB;QAClB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,KAAK,CAAC,CAAC,CAAC;YAC7B,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAC1B,CAAC;QAED,mDAAmD;QACnD,sBAAsB;QACtB,uBAAuB;QACvB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,2BAA2B;QAC3B,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;IAClB,CAAC;IAED,8BAAS,GAAT,UAAU,SAAS;QACjB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QAExB,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;QAChB,UAAU,CAAC;YACT,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAC,QAAQ;QAChC,CAAC,EAAE,IAAI,CAAC;IACV,CAAC;IACD,+BAAU,GAAV,UAAW,cAAc;QACvB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACpC,cAAc,CAAC,QAAQ,EAAE,CAAC,SAAQ;QAClC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,MAAM,CAAC,CAAC,CAAC;YACzB,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,SAAQ;QACvC,CAAC;QACD,wCAAwC;IAC1C,CAAC;IAjLU,UAAU;QAJtB,gEAAS,CAAC;YACT,QAAQ,EAAE,aAAa;WACG;SAC3B,CAAC;kGAkBiJ;YAC3H,OAAmB;OAlB9B,UAAU,CA2LtB;IAAD,CAAC;AAAA;SA3LY,UAAU,e;;;;;;;;;;;;;;;;;;;ACnBkB;AACO;AACV;AAUtC;IAAA;IAA+B,CAAC;IAAnB,gBAAgB;QAR5B,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2DAAU;aACX;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,2DAAU,CAAC;aACrC;SACF,CAAC;OACW,gBAAgB,CAAG;IAAD,uBAAC;CAAA;AAAH","file":"81.js","sourcesContent":["declare var $: any\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { HttpServicesProvider } from '../../../providers/http-services';\nimport { Utils } from '../../../providers/Utils';\nimport { StorageProvider } from '../../../providers/storage';\nimport { PhoneDeviceProvider } from '../../../providers/phone-device';\n/**\n * Generated class for the LmsitePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-lmsite',\n  templateUrl: 'lmsite.html',\n})\nexport class LmsitePage {\n  public tabNameList = [{ 'name': '我的待办', 'code': '', 'value': '' }, { 'name': '已发布', 'code': '', 'value': '' }, { 'name': '未发布', 'code': '', 'value': '' }]\n  public list = [];//列表\n  public dataList = []; //缓存页码数据（上拉加载）\n  public mCurrentPage = 0;//默认page\n  public where = '';//搜索\n  public description = '';//搜索输入框内容\n  public searchlist = [];\n  public htRegistrationType = [];//隐患类型\n  public stops = '';//无数据加载完毕\n  public currentTab = 0;//tab默认第一个\n  public itemTab = 99;\n  public status = '';\n  public images = [];\n  public htIllegallist = [];\n  public projectid = '';\n  public timer = null;\n  constructor(public navCtrl: NavController, public storage: StorageProvider, public navParams: NavParams, public httpService: HttpServicesProvider,\n    public phoneDevice: PhoneDeviceProvider) {\n    this.phoneDevice.phoneBacktoPop(this.navCtrl);\n    this.projectid = this.storage.get(StorageProvider.LM_PROJECTID);\n\n  }\n  ionViewWillEnter() {//当将要进入页面时触发\n    this.list = [];\n    this.initlist(1);\n  }\n  // searchClick(){//搜索\n  //   $('.searchWarp').toggle();\n  //   $('.searchWarp').css({'height':'auto'});\n  //   var display =$('.searchWarp').css('display');\n  //   if(display == 'block'){\n  //     document.getElementById('topest').scrollIntoView();\n  //   }\n  //   this.description = '';\n  //   this.searchlist = [];\n  // }\n  // 搜索+防抖\n  handleSearch() {\n    this.list = [];\n    // console.log(this.search);\n    clearTimeout(this.timer)\n    if (this.description == '') {\n      this.initlist(1);\n      return false;\n    }\n    this.timer = setTimeout(() => {\n      var fuzzysearch = encodeURIComponent(this.description);\n      var url = '/lmtagInteractive/list?projectid=' + this.projectid + '&rows=-1&page=1&sidx=&sort=code&sord=asc&order=desc&fuzzysearch=' + fuzzysearch;\n      this.initsearchlist(url);\n      this.timer = null;\n    }, 300)\n  }\n  // search(){//点击搜索\n  //   if(this.description != ''){\n  //   var fuzzysearch =   encodeURIComponent(this.description);\n  //   var url = '/lmtagWorkorder/list?projectid='+this.projectid+'&rows=-1&page=1&sidx=&sord=code&fuzzysearch='+fuzzysearch;\n  //     // $('.searchWarp').css({'height':'100%'});\n  //     this.initsearchlist(url)\n  //   }\n  // }\n  clearSearch() {//点击取消搜索\n    this.description = '';\n    this.searchlist = [];\n    // $('.searchWarp').hide();\n    // $('.tab-nav').show();\n    this.list = [];\n    this.initlist(this.mCurrentPage)\n  }\n  clickInfo(id) {//查看详情\n    this.description = '';\n    this.searchlist = [];\n    this.list = [];\n    this.navCtrl.push('LmsiteinfoPage', {\n      type: 'edit',\n      interactiveid: id\n    })\n  }\n  addClick() {//新建\n    this.navCtrl.push('LmsiteinfoPage', {\n      type: 'add'\n    })\n  }\n  initsearchlist(url) {//初始化搜索列表\n    var that = this;\n    $('.tab-nav').hide();\n    that.httpService.get(url, null, (result) => {\n      if (result != null && result.rows.length > 0) {\n        var rows = result.rows;\n        that.list = rows;\n      } else {\n        $('.searchWarp .listWarp').html('没有搜索到相关数据').css({ 'text-align': 'center' });\n      }\n    });\n  }\n  initlist(page) {//初始化列表\n    var url = '';\n\n    if (this.currentTab == 0) {\n      url = '/lmtagInteractive/list?projectid=' + this.projectid + '&sort=code&_search=false&rows=20&page=' + page + '&sidx=&sord=asc&order=desc&nw_resperson1=my'\n    }\n    if (this.currentTab == 1) {\n      url = '/lmtagInteractive/list?projectid=' + this.projectid + '&sort=code&_search=false&rows=20&page=' + page + '&sidx=&sord=asc&order=desc&where=%7B%22toint_wfstatus_equal%22:%22CLOSE%22%7D'\n\n    }\n    if (this.currentTab == 2) {\n      url = '/lmtagInteractive/list?projectid=' + this.projectid + '&sort=code&_search=false&rows=20&page=' + page + '&sidx=&sord=asc&order=desc&where=%7B%22toint_wfstatus_equal%22:%22NEW%22%7D'\n\n    }\n    // if (this.currentTab == 3) {\n    //   url = '/lmtagInteractive/list?projectid=' + this.projectid + '&sort=code&_search=false&rows=20&page=' + page + '&sidx=&sord=asc&order=desc&nw_status=3'\n    // }\n    // if (this.currentTab == 4) {\n    //   url = '/lmtagInteractive/list?projectid=' + this.projectid + '&sort=code&_search=false&rows=20&page=' + page + '&sidx=&sord=asc&order=desc&nw_status=4'\n    // }\n    var that = this;\n    var lists = this.list;\n    that.httpService.get(url, null, (result) => {\n      if (page > result.total) {\n        this.stops = 'true';\n        return false;\n      }\n      if (result != null && result.rows.length > 0) {\n        var rows = result.rows;\n        // for(var i=0;i<rows.length;i++){\n        //   if(rows[i].planfinishtime != '' && rows[i].planfinishtime != null){\n        //     rows[i].planfinishtime = Utils.dateFormat(new Date(rows[i].planfinishtime ), 'yyyy-MM-dd');\n        //   }\n        //   if(rows[i].checktime != '' && rows[i].checktime != null){\n        //     rows[i].checktime = Utils.dateFormat(new Date(rows[i].checktime ), 'yyyy-MM-dd hh:mm');\n        //   }\n        // }\n        that.dataList = rows;\n        lists = lists.concat(that.dataList);\n        that.list = lists;\n        that.mCurrentPage = page;\n      }\n    });\n  }\n  chooseStatus(value, index) {\n    $('.tab-nav .nav-item:eq(' + index + ')').addClass('active').siblings().removeClass('active');\n    $('.screenBox .item').removeClass('active');\n    // let url = '';\n\n    // /piInOut/list?sort=num&order=desc&sigman=\n    // let obj={\"nw_wfstatus\":value};\n    // var where = '';\n    if (this.currentTab == index) {\n      return false;\n    } else {\n      this.currentTab = index;\n    }\n\n    // where = encodeURIComponent(JSON.stringify(obj));\n    // this.where = where;\n    // this.status = value;\n    this.list = [];\n    // this.htIllegallist = [];\n    this.initlist(1)\n  }\n\n  doRefresh(refresher) {//下拉刷新\n    this.list = [];\n    this.htIllegallist = [];\n\n    this.initlist(1)\n    setTimeout(() => {\n      refresher.complete(); //停止下拉刷新\n    }, 2000)\n  }\n  doInfinite(infiniteScroll) {//上拉加载\n    this.initlist(this.mCurrentPage + 1)\n    infiniteScroll.complete();//停止上拉加载\n    if (this.stops == 'true') {\n      infiniteScroll.enable(false);//停止上拉加载\n    }\n    // infiniteScroll.enable(false);//停止上拉加载\n  }\n  // getDict() {//请求数据字典初始化\n  //   var that = this;\n  //   that.httpService.getDict(\"HT_REGISTRATION_TYPE\", data => {//隐患类型\n  //     if (data !== \"\") {\n  //       that.htRegistrationType = data;\n  //     }\n  //   })\n\n  // }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lm/lmsite/lmsite.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LmsitePage } from './lmsite';\n\n@NgModule({\n  declarations: [\n    LmsitePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LmsitePage),\n  ],\n})\nexport class LmsitePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lm/lmsite/lmsite.module.ts"],"sourceRoot":""}