{"version":3,"sources":["../../src/pages/lm/lmtagfile/lmtagfiletechdatarecord/lmtagfiletechdatarecorddetail/lmtagfiletechdatarecorddetail.ts","../../src/pages/lm/lmtagfile/lmtagfiletechdatarecord/lmtagfiletechdatarecorddetail/lmtagfiletechdatarecorddetail.module.ts"],"names":[],"mappings":"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","file":"70.js","sourcesContent":["declare var $: any\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\nimport { HttpServicesProvider } from '../../../../../providers/http-services';\nimport { Utils } from '../../../../../providers/Utils';\nimport { StorageProvider } from '../../../../../providers/storage';\nimport { PhoneDeviceProvider } from '../../../../../providers/phone-device';\n\n/**\n * Generated class for the LmtagfiletechdatarecorddetailPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-lmtagfiletechdatarecorddetail',\n  templateUrl: 'lmtagfiletechdatarecorddetail.html',\n})\nexport class LmtagfiletechdatarecorddetailPage {\n  public formdata = [\n    { 'name': '设备名称', 'index': 'assetname', 'type': 'text', 'placeholder': '请输入设备名称', 'disabled': true },\n    { 'name': '附件', 'index': 'imgfile', 'type': 'uploadify', 'placeholder': '', 'busstype': 'lmtagTechData' },\n  ]\n  public formdata2 = [\n    { 'name': '测量点名称', 'index': 'measurename', 'type': 'text', 'placeholder': '请输入测量点名称', 'disabled': true },\n  ]\n\n  public defaultOption = {\n    container: 'luckysheet', // 设定DOM容器的id\n    lang: 'zh', // 设定表格语言\n    showsheetbar: false,\n    enableAddBackTop: false,\n    showinfobar: false,\n    \"row\": 8, //行数\n    \"column\": 5, //列数\n    \"defaultRowHeight\": 32, //自定义行高\n    \"defaultColWidth\": 78, //自定义列宽\n    sheetFormulaBar: false,\n    showstatisticBar: false,\n    showstatisticBarConfig: {\n      zoom: true,\n    },\n    rowHeaderWidth: 0, // 行标题宽度\n    columnHeaderHeight: 0, // 列标题高度\n    showtoolbar: false,\n    defaultFontSize: 12, // 默认字体大小\n    data: [{ \"name\": \"Sheet1\" }]\n  }\n\n  public id = '';\n  public forminfo = {};\n  public forminfo2 = {};\n  public jsonstr;\n\n  constructor(public navCtrl: NavController, public storage: StorageProvider, public navParams: NavParams, public httpService: HttpServicesProvider,\n    public phoneDevice: PhoneDeviceProvider, public toastCtrl: ToastController,) {\n    // this.phoneDevice.phoneBacktoPop(this.navCtrl);\n    this.id = this.navParams.get('id');\n    this.forminfo = this.navParams.get('forminfo');\n  }\n\n  ionViewWillEnter() {//当将要进入页面时触发\n    this.initinfo();\n  }\n\n  initDomHeight() {\n    const viewHeight = $('page-lmtagfiletechdatarecorddetail .scroll-content').height();\n    const baseDivHeight = $('page-lmtagfiletechdatarecorddetail #baseinfo').height();\n    const baseDiv2Height = $('page-lmtagfiletechdatarecorddetail #baseinfo2').height();\n    const exceleditorboxHeight = viewHeight - baseDivHeight - baseDiv2Height - 30;\n    $('page-lmtagfiletechdatarecorddetail #exceleditorbox').height(exceleditorboxHeight);\n  }\n\n  initinfo() {\n    var url = \"/lmtagTechData/detail/\" + this.id;\n    this.httpService.get(url, null, (result) => {\n      this.forminfo2 = result.data;\n      this.jsonstr = result.data.tabledata;\n\n      this.initDomHeight();\n      if (this.jsonstr != '' && this.jsonstr != null) {\n        window['luckysheet'].create({\n          ...this.defaultOption,\n          ...JSON.parse(this.jsonstr.replace(/&nbsp;/g, ' '))\n        });\n      } else {\n        // 加载空模版\n        window['luckysheet'].create(this.defaultOption);\n      }\n    });\n  }\n\n  getExcelJson() {\n    let exceldata = window['luckysheet'].toJson()\n    // 去除没用的数据\n    delete exceldata.data[0].data\n    delete exceldata.data[0].luckysheet_select_save\n    delete exceldata.data[0].visibledatacolumn\n    delete exceldata.data[0].visibledatarow\n\n    return JSON.stringify(exceldata)\n  }\n\n  submit() {\n    this.forminfo2['tabledata'] = this.getExcelJson();\n\n    let obj = {\n      master: this.forminfo2\n    }\n    this.httpService.post('/lmtag/lmtagTechDataService/saveMasterSlave', obj, (res) => {\n      if (res.code == 0) {\n        this.initinfo();\n        this.toastCtrl.create({\n          position: 'bottom',\n          duration: 1500,\n          message: '保存成功',\n        }).present();\n      } else {\n        this.toastCtrl.create({\n          position: 'bottom',\n          duration: 1500,\n          message: '保存失败',\n        }).present();\n      }\n    })\n  }\n\n  workflowStart() {\n    this.forminfo2['tabledata'] = this.getExcelJson();\n\n    let obj = {\n      master: this.forminfo2\n    }\n    this.httpService.post('/lmtag/lmtagTechDataService/saveMasterSlave', obj, (res) => {\n      if (res.code == 0) {\n        // this.initinfo();\n        this.toastCtrl.create({\n          position: 'bottom',\n          duration: 1500,\n          message: '保存成功',\n        }).present();\n        this.navCtrl.pop();\n      } else {\n        this.toastCtrl.create({\n          position: 'bottom',\n          duration: 1500,\n          message: '保存失败',\n        }).present();\n      }\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lm/lmtagfile/lmtagfiletechdatarecord/lmtagfiletechdatarecorddetail/lmtagfiletechdatarecorddetail.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LmtagfiletechdatarecorddetailPage } from './lmtagfiletechdatarecorddetail';\nimport { ComponentsModule } from '../../../../../components/components.module'\n\n\n@NgModule({\n  declarations: [\n    LmtagfiletechdatarecorddetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LmtagfiletechdatarecorddetailPage), ComponentsModule,\n  ],\n})\nexport class LmtagfiletechdatarecorddetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lm/lmtagfile/lmtagfiletechdatarecord/lmtagfiletechdatarecorddetail/lmtagfiletechdatarecorddetail.module.ts"],"sourceRoot":""}