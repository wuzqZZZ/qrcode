{"version":3,"sources":["../../src/pages/lm/lmtagworkorder/lmtagworkorderinfo/components/lmtagworkorderplaninfo/lmtagworkorderplaninfo.ts","../../src/pages/lm/lmtagworkorder/lmtagworkorderinfo/components/lmtagworkorderplaninfo/lmtagworkorderplaninfo.module.ts"],"names":[],"mappings":"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","file":"39.js","sourcesContent":["declare var $:any \nimport { Component } from '@angular/core';\nimport { Events, IonicPage, NavController, NavParams, Platform, ToastController } from 'ionic-angular';\nimport { HttpServicesProvider } from '../../../../../../providers/http-services';\nimport { PhoneDeviceProvider } from '../../../../../../providers/phone-device';\nimport { StorageProvider } from '../../../../../../providers/storage';\nimport { ToolsProvider } from '../../../../../../providers/tools';\nimport { WorkflowServiceProvider } from '../../../../../../providers/workflow-service';\n\n/**\n * Generated class for the LmtagworkorderplaninfoPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-lmtagworkorderplaninfo',\n  templateUrl: 'lmtagworkorderplaninfo.html',\n})\nexport class LmtagworkorderplaninfoPage {\n  public formdata = [\n    { 'name': '计划开工日期', 'index': 'planstarttime', 'type': 'datetime', 'format': 'YYYY-MM-DD hh:mm:ss', \"placeholder\": '请选择计划开工日期' },\n    { 'name': '计划完工日期', 'index': 'planendtime', 'type': 'datetime', 'format': 'YYYY-MM-DD hh:mm:ss', \"placeholder\": '请选择计划完工日期' },\n    { 'name': '计划工期(天)', 'index': 'planworkhour', 'type': 'text', 'placeholder': '请输入计划工期天数' },\n    { 'name': '计划状态', 'index': 'planstatus', 'type': 'select', 'dicttype': 'LMTAG_PROJECT_PLANSTATUS', 'placeholder': '请输入计划状态' },\n    // {'name':'计划工时(人日)','index':'planworkhour','type':'text','placeholder':'请输入计划工时'},\n    { 'name': '检修专业', 'index': 'specialty', 'type': 'select', 'dicttype': 'BKC_SPECAIL', \"placeholder\": '请选择检修专业' },\n    // { 'name': '项目负责人', 'index': 'helpdirectorname', 'indexId': 'helpdirectorid', 'type': 'selectUser', \"placeholder\": '请选择项目负责人' },\n    { 'name': '工作负责人', 'index': 'respersonname', 'indexId': 'resperson', 'type': 'selectUser', \"placeholder\": '请选择工作负责人' },\n    { 'name': '配合人', 'index': 'cooperatepersonname', 'indexId': 'cooperateperson', 'type': 'selectUser', \"placeholder\": '请选择配合人' },\n    { 'name': '配合专业', 'index': 'cooperatespecialty', 'type': 'select', 'dicttype': 'BKC_SPECAIL', 'placeholder': '请选择配合专业' },\n    { 'name': '技术监督专业', 'index': 'techspecialty', 'type': 'select', 'dicttype': 'BKC_SPECAIL', 'placeholder': '请选择技术监督专业' },\n    { 'name': '合同编号', 'index': 'contractcode', 'type': 'text', 'placeholder': '请输入合同编号' },\n    { 'name': '合同名称', 'index': 'contractname', 'type': 'text', 'placeholder': '请输入合同名称' },\n    { 'name': '试验项目', 'index': 'testproject', 'type': 'select', 'dicttype': 'LMTAG_PROJECT_TESTPROJECT', 'placeholder': '请输入实验项目' },\n  ]\n  public formdata2 = [\n    { 'name': '外委', 'index':'outsource', 'type':'customswitch',\"placeholder\":'请选择是否外委'},\n    { 'name': '主要材料', 'index': 'mainmaterial', 'type': 'textarea', \"placeholder\": '请输入主要材料', 'disabled': true, 'autoheight': true },\n    { 'name': '计划材料费（元）', 'index': 'planmaterialaccount', 'type': 'text', 'placeholder': '请输入计划材料费', 'disabled': true },\n    { 'name': '工日数量（日）', 'index': 'workday', 'type': 'text', 'placeholder': '请输入工日数量', 'disabled': true },\n    { 'name': '工日单价（元/工日）', 'index': 'workprice', 'type': 'text', 'placeholder': '请输入工日单价', 'disabled': true },\n    { 'name': '计划人工费', 'index': 'plantime', 'planpersonaccount': 'text', 'placeholder': '请输入计划人工费', 'disabled': true },\n    { 'name': '费用合计', 'index': 'totalaccount', 'type': 'text', 'placeholder': '请输入费用合计', 'disabled': true },\n    { 'name': '工作量说明', 'index': 'remark', 'type': 'textarea', \"placeholder\": '请输入工作量说明', 'disabled': true, 'autoheight': true },\n\n  ]\n\n  public forminfo={};\n  public id='';\n  public type = '';\n  public pageControl = {};\n\n  constructor(public events: Events, public storage: StorageProvider, public navCtrl: NavController, public toastCtrl: ToastController, public navParams: NavParams, public httpService: HttpServicesProvider, public workflow: WorkflowServiceProvider,\n    public platform: Platform,\n    public tools:ToolsProvider,\n    public phoneDevice: PhoneDeviceProvider,) {\n    this.phoneDevice.phoneBacktoPop(this.navCtrl);\n\n    this.id = this.navParams.get('prjid');\n    this.type = this.navParams.get('type');\n    // this.forminfo = this.navParams.get('forminfo');\n\n    // if (this.forminfo !== '' || this.forminfo !== null) {\n    //   this.httpService.inittime('planstarttime', this.forminfo)\n    //   this.httpService.inittime('planendtime', this.forminfo)\n    //   this.httpService.inittime('filltime', this.forminfo)\n    // console.log('navParams => ', this.forminfo);\n\n    // } else {\n    //   this.initinfo()\n    // }\n    this.initinfo()\n\n  }\n  initinfo(){\n    var url = \"/lmtagProject/detail/\" + this.id;\n    this.httpService.get(url, null, (result) => {\n      if (result.code == 0) {\n        this.forminfo = result.data;\n\n        this.pageElement(result.data.wfstatus, result.data.wfid);\n\n        this.httpService.inittime('planstarttime', this.forminfo);\n        this.httpService.inittime('planendtime', this.forminfo);\n\n        this.httpService.initUserName(result.data.cooperateperson, 'cooperatepersonname', this.forminfo)\n        this.httpService.initUserName(result.data.resperson, 'respersonname', this.forminfo)\n      }\n    });\n  }\n  pageElementControl(data) {\n    this.pageControl = data;\n  }\n  async pageElement(wfstatus, wfid) {// 初始化页面资源权限\n    // var that = this;\n    const data = await this.httpService.getPageControlElementAnsy(\"lmtagWorkorder_form\", wfstatus, wfid);\n    this.pageElementControl(data);\n    var array = this.httpService.pageDate(data);\n    this.formdata = this.httpService.getpagedata(this.formdata, array);\n    this.formdata2 = this.httpService.getpagedata(this.formdata2, array);\n  }\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad LmtagworkorderplaninfoPage');\n  }\n  submit() {\n    this.httpService.initsavetime('planstarttime', this.forminfo);\n    this.httpService.initsavetime('planendtime', this.forminfo);\n\n    console.log(this.forminfo);\n\n    let obj = {\n      master: this.forminfo\n    }\n    this.httpService.post('/lmtag/lmtagProjectService/saveMasterSlave', obj, (res) => {\n      if (res.code == 0) {\n        this.initinfo();\n        this.toastCtrl.create({\n          position: 'bottom',\n          duration: 1500,\n          message: '保存成功',\n        }).present();\n      } else {\n        this.toastCtrl.create({\n          position: 'bottom',\n          duration: 1500,\n          message: '保存失败',\n        }).present();\n      }\n    })\n\n    this.navCtrl.pop();\n    this.events.publish('workorderplan:forminfo', this.forminfo);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lm/lmtagworkorder/lmtagworkorderinfo/components/lmtagworkorderplaninfo/lmtagworkorderplaninfo.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LmtagworkorderplaninfoPage } from './lmtagworkorderplaninfo';\nimport { ComponentsModule } from '../../../../../../components/components.module'\n\n@NgModule({\n  declarations: [\n    LmtagworkorderplaninfoPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LmtagworkorderplaninfoPage),ComponentsModule\n  ],\n})\nexport class LmtagworkorderplaninfoPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lm/lmtagworkorder/lmtagworkorderinfo/components/lmtagworkorderplaninfo/lmtagworkorderplaninfo.module.ts"],"sourceRoot":""}