{"version":3,"sources":["../../src/pages/lm/lmsite/lmsiteinfo/lmsiteinfo.ts","../../src/pages/lm/lmsite/lmsiteinfo/lmsiteinfo.module.ts"],"names":[],"mappings":"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","file":"80.js","sourcesContent":["declare var $: any\nimport { Component } from '@angular/core';\nimport { Events, IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\nimport { HttpServicesProvider } from '../../../../providers/http-services';\nimport { PhoneDeviceProvider } from '../../../../providers/phone-device';\nimport { StorageProvider } from '../../../../providers/storage';\nimport { ToolsProvider } from '../../../../providers/tools';\nimport { WorkflowServiceProvider } from '../../../../providers/workflow-service';\nimport { Utils } from '../../../../providers/Utils';\n\n/**\n * Generated class for the LmsiteinfoPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-lmsiteinfo',\n  templateUrl: 'lmsiteinfo.html',\n})\nexport class LmsiteinfoPage {\n  public formdata = [\n    { 'name': '检修阶段', 'index': 'stage', 'type': 'select', 'dicttype': 'LMPJ_PROJECT_STAGE', 'placeholder': '请选择检修阶段' },\n    { 'name': '文件类型', 'index': 'filetype', 'type': 'select', 'dicttype': 'LMTAG_INTERACTIVE_FILETYPE', 'placeholder': '请输入文件类型' },\n    { 'name': '说明', 'index': 'description', 'type': 'textarea', 'placeholder': '请输入工作内容' },\n    { 'name': '附件', 'index': 'interactiveid', 'type': 'uploadify', 'placeholder': '', 'busstype': 'lmtagInteractive' },\n  ]\n\n  public formdata2 = [\n    { 'name': '填报人', 'index': 'creatername', 'indexId': 'creater', 'type': 'selectUser', 'placeholder': '请选择填报人' },\n    { 'name': '填报时间', 'index': 'createtime', 'type': 'datetime', 'placeholder': '填报时间', 'format': 'YYYY-MM-DD HH:mm:ss' },\n    { 'name': '发布人', 'index': 'uploadername', 'indexId': 'uploader', 'type': 'selectUser', 'placeholder': '请选择发布人' },\n    { 'name': '发布时间', 'index': 'uploadtime', 'type': 'datetime', 'placeholder': '发布时间', 'format': 'YYYY-MM-DD HH:mm:ss' },\n  ]\n\n  public id = \"\";\n  public type = \"\";\n  public forminfo = {};\n  public pageControl = {};\n  public projectid = '';\n\n  constructor(public events: Events, public storage: StorageProvider, public navCtrl: NavController, public toastCtrl: ToastController, public navParams: NavParams, public httpService: HttpServicesProvider, public workflow: WorkflowServiceProvider,\n    public tools: ToolsProvider,\n    public phoneDevice: PhoneDeviceProvider,) {\n    \n    this.phoneDevice.phoneBacktoPop(this.navCtrl);\n    this.id = this.navParams.get('interactiveid');\n    this.type = this.navParams.get('type');\n    this.projectid = this.storage.get(StorageProvider.LM_PROJECTID)\n\n    if (this.type == 'edit') {\n      this.initinfo();\n    } else {\n      this.id = Utils.getUuid();\n      let userinfo = this.storage.get(StorageProvider.ME_USERINFO);//读取登录人的储存信息\n      this.forminfo = {\n        interactiveid: this.id,\n        projectid: this.projectid,\n        wfstatus: 'NEW',\n        uploader: userinfo.id,\n        uploadtime: Utils.dateFormat(new Date(), 'yyyy-MM-dd hh:mm:ss')\n      }\n      this.initprojectinfo()\n    }\n\n  }\n  ionViewWillEnter() {\n \n  }\n\n  initinfo() {\n    var url = \"/lmtagInteractive/detail/\" + this.id;\n    this.httpService.get(url, null, (result) => {\n      if (result.code == 0) {\n        this.forminfo = result.data;\n        console.log('------', this.forminfo);\n\n        this.httpService.initUserName(result.data.creater, 'creatername', this.forminfo)\n        this.httpService.initUserName(result.data.uploader, 'uploadername', this.forminfo)\n        this.httpService.inittime('createtime', this.forminfo)\n        this.httpService.inittime('uploadtime', this.forminfo)\n      }\n    });\n  }\n\n  initprojectinfo() {\n    var url = '/lmpjProject/findProjectMessage?id=' + this.projectid\n    this.httpService.get(url, null, (result) => {\n      if (result.code == 0) {\n        this.forminfo['stage'] = result.data.pjstage;\n        console.log('------', result.data.pjstage);\n\n      }\n    });\n  }\n\n  submit() {\n    if (this.type == 'edit') {\n      this.httpService.initsavetime('createtime', this.forminfo)\n      this.httpService.initsavetime('uploadtime', this.forminfo)\n    }\n\n    var url = '/lmtagInteractive/save';\n    this.httpService.postform(url, 'lmtagInteractive', this.forminfo, (res) => {\n      if (res.code == 0) {\n        this.initinfo();\n        this.toastCtrl.create({\n          position: 'bottom',\n          duration: 1500,\n          message: '保存成功',\n        }).present();\n      } else {\n        this.toastCtrl.create({\n          position: 'bottom',\n          duration: 1500,\n          message: '保存失败',\n        }).present();\n      }\n    })\n  }\n\n  workflowStart() { //发送流程\n    // this.saveStr = \"true\";\n    this.submit();\n    if (this.forminfo['wfid'] != \"\" && this.forminfo['wfid'] != null) {\n      this.navCtrl.push('WorkflowroutePage', { 'busstype': 'lmtagInteractive', 'bussid': this.forminfo['interactiveid'], 'wfid': this.forminfo['wfid'] });\n    } else {\n      //发送流程\n      this.navCtrl.push('WorkflowstartPage', { 'busstype': 'lmtagInteractive', 'bussid': this.forminfo['interactiveid'] });\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lm/lmsite/lmsiteinfo/lmsiteinfo.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LmsiteinfoPage } from './lmsiteinfo';\nimport { ComponentsModule } from '../../../../components/components.module'\n\n\n@NgModule({\n  declarations: [\n    LmsiteinfoPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LmsiteinfoPage), ComponentsModule\n  ],\n})\nexport class LmsiteinfoPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lm/lmsite/lmsiteinfo/lmsiteinfo.module.ts"],"sourceRoot":""}